---
layout: post
title:  "Tip Of The Day: Copy DB dump from one Docker container to another"
excerpt: "This post describes what to do, if you need to create DB dump in one Docker container and apply it in another."
modified:   2019-04-23 22:52:55
categories: [Docker, MySQL, Dump]
comments: true
share: true
aging: true
---

<h1>Situation</h1>
<p>You need to create DB dump in one Docker container and apply it in another Docker container.</p>

<h1>Application</h1>
<p>Crate DB dump on staging env and apply it on local env to experiment with existing database.</p>

<h1>Solution</h1>
<ol>
    <li>Connect to first container:</li>
{% highlight python %}
docker exec -ti mysql-staging /bin/bash
{% endhighlight %}
    <li>Create DB dump:</li>
{% highlight python %}
mysqldump -u user -p --databases db > /tmp/db.sql
{% endhighlight %}
    <li>Copy dump to local host:</li>
{% highlight python %}
# general syntax:
# docker cp CONTAINER:SRC_PATH DEST_PATH
docker cp mysql:/tmp/db.sql /tmp/db.sql
{% endhighlight %}
    <li>Copy dump to second container:</li>
{% highlight python %}
# general syntax:
# docker cp DEST_PATH CONTAINER:SRC_PATH
docker cp /tmp/db.sql mysql:/tmp/db.sql
{% endhighlight %}
    <li>Apply DB dump:</li>
{% highlight sql %}
docker exec -ti mysql /bin/bash
mysql -u user -p
-- Run the backup script to recreate the database
mysql> drop database if exists db;
mysql> source /tmp/db.sql
{% endhighlight %}
</ol>
