<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Oxymorus Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.oxymorus.com/"/>
  <updated>2019-06-19T10:58:44.000Z</updated>
  <id>https://www.oxymorus.com/</id>
  
  <author>
    <name>Oleksii Zghurskyi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Implementing back-pressure in practice</title>
    <link href="https://www.oxymorus.com/backpressure/"/>
    <id>https://www.oxymorus.com/backpressure/</id>
    <published>2019-06-19T10:58:44.000Z</published>
    <updated>2019-06-19T10:58:44.000Z</updated>
    
    <content type="html"><![CDATA[<div class="paragraph"><p>Back-pressure is an important feedback mechanism that allows systems to gracefully respond to load rather than collapse under it. The back-pressure may cascade all the way up to the user, at which point responsiveness may degrade, but this mechanism will ensure that the system is resilient under load.</p></div><a id="more"></a><div class="sect1"><h2>Back-Pressure</h2><div class="sectionbody"><div class="paragraph"><p>This is how it&#8217;s defined in <a href="https://www.reactivemanifesto.org/glossary#Back-Pressure" target="_blank" rel="noopener">Reactive Manifesto</a>:</p></div><div class="quoteblock"><blockquote><div class="paragraph"><p><strong>Back-Pressure</strong></p></div><div class="paragraph"><p>When one component is struggling to keep-up, the system as a whole needs to respond in a sensible way. It is unacceptable for the component under stress to fail catastrophically or to drop messages in an uncontrolled fashion. Since it can’t cope and it can’t fail it should communicate the fact that it is under stress to upstream components and so get them to reduce the load. This back-pressure is an important feedback mechanism that allows systems to gracefully respond to load rather than collapse under it. The back-pressure may cascade all the way up to the user, at which point responsiveness may degrade, but this mechanism will ensure that the system is resilient under load, and will provide information that may allow the system itself to apply other resources to help distribute the load.</p></div></blockquote></div><div class="paragraph"><p>Let&#8217;s illustrate the situation that may motivate to apply some back-pressure.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/backpressure.png"><img src="/images/backpressure.png" alt="backpressure"></a></div></div></div></div><div class="paragraph"><p>So, essentially the problem here is the mismatch in throughput between services.</p></div></div></div><div class="sect1"><h2>Implementing back-pressure in practice</h2><div class="sectionbody"><div class="paragraph"><p>Once you are in the situation described above, essentially you have following choices:</p></div><div class="ulist"><ul><li><p><strong>(Auto-)Scale</strong> service, that is under pressure</p></li><li><p><strong>Drop down or sample</strong> incoming requests, once service under pressure is saturated</p></li><li><p><strong>Buffer</strong> requests</p></li><li><p><strong>Control</strong> the request producer</p></li></ul></div><div class="paragraph"><p><strong>(Auto-)Scaling</strong> probably is the easiest way to deal with the problem. E.g. in the example above the solution might be to just scale the service B up - this definitely will resolve throughput deficit. This might be just enough in some cases, but in other it might lead to just propagating the problem to the next service (e.g. service C). Also, if you are in severe cost/hardware deficit it simply might not be possible.</p></div><div class="paragraph"><p><strong>Dropping down or sampling</strong> incoming requests means processing only some fraction of incoming requests and ignoring others. E.g. in the example above to solve the problem it would be enough for service B to just skip processing every 3rd request. However, most often it&#8217;s not applicable in practice</p></div><div class="paragraph"><p><strong>Buffering</strong> requests probably is the most intuitive thing to do. E.g. in the example above - this approach can be implemented by introducing some messaging queue between service A and B or, alternatively, storing incoming request to the database. This in essence allows service B to pull requests when it&#8217;s ready to process them. However, beside the complication in infrastructure it might not always be possible since not all requests might be processed asynchronously.</p></div><div class="paragraph"><p><strong>Controlling</strong> the request producer is actually what is defined as "back-pressure" by Reactive Manifesto. In the example above it means that service B should be able to slow down/speed up service A. This means that service A should not <em>push</em> requests to service B, instead service B should <em>pull</em> desired number of requests from service A. However, controlling request producer speed is not always an option (again, imaging telling your user to slow down). Also implementing controlling mechanism is introducing complexity in the system, so should be decided carefully.</p></div></div></div><div class="sect1"><h2>Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>Whenever there is a mismatch in throughput between services there might be the opportunity to apply some form of back-pressure.</p></div><div class="paragraph"><p>What strategy should be applied really depends on the constraints and requirements at hand. Sometime, just leaving it as is might be enough.</p></div></div></div>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Back-pressure is an important feedback mechanism that allows systems to gracefully respond to load rather than collapse under it. The back-pressure may cascade all the way up to the user, at which point responsiveness may degrade, but this mechanism will ensure that the system is resilient under load.&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://www.oxymorus.com/categories/reactive/"/>
    
      <category term="Back-Pressure" scheme="https://www.oxymorus.com/categories/reactive/back-pressure/"/>
    
    
      <category term="back-pressure" scheme="https://www.oxymorus.com/tags/back-pressure/"/>
    
  </entry>
  
</feed>
